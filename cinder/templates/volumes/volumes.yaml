#TODO For vmware we should use the hypervisor definition to define volume nodes to avoid repeating config - consider moving hypervisor, volume, share and network hardware definitions into global section.
{{- $context := . -}}
{{- range $i, $volume := .Values.volumes_vmware -}}
{{ tuple $context $volume |include "volume_vmware" }}
---
{{ tuple $context $volume |include "volume_vmware_configmap" }}
{{ if lt $i (sub (len $context.Values.volumes_vmware) 1) }}
---
{{end}}
{{- end -}}
{{ if and (ge (len .Values.volumes_netapp) 1)  (ge (len .Values.volumes_vmware) 1) }}
---
{{end}}
{{- range $i, $volume := .Values.volumes_netapp -}}
{{ tuple $context $volume |include "volume_netapp" }}
---
{{ tuple $context $volume |include "volume_netapp_configmap" }}
{{ if lt $i (sub (len $context.Values.volumes_netapp) 1) }}
---
{{end}}
{{- end -}}
