apiVersion: v1
kind: ConfigMap
metadata:
  name: ironic-inspector-dhcp
  labels:
    system: openstack
    type: configuration
    component: ironic
data:
  config.json: |
    {"command":"dnsmasq --conf-dir=/var/lib/kolla/config_files,*.conf"}
  dnsmasq.conf: |
    no-resolv
    no-poll # Do not poll /etc/resolv.conf
    no-hosts
    user=root
    log-facility=-
    log-async
    log-dhcp
    keep-in-foreground
    port=0  # Disable DNS
    dhcp-sequential-ip
    dhcp-range={{.Values.inspector.dhcp.range}}
    dhcp-option=3,{{.Values.inspector.dhcp.options.router}}
    dhcp-option=6,147.204.9.200,147.204.9.201
    dhcp-boot=pxelinux.0,ironic-boot,{{.Values.tftp_ip}}
